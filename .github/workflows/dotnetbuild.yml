name: .NET Build

on:
  push:
    branches: 
        - master
env:
  APP_ASSESSMENTTOOL_NAME: "Assessment Tool Prototype"
  APP_ASSESSMENTTOOL_FULL_NAME: "Assessment Tool Prototype\\Assessment Tool Prototype.sln"
  APP_ASSESSMENTTOOL_OUTPUT_FOLDER: "Assessment Tool Prototype\\NET Framwork48\\bin\\Release"
  APP_JSONDATAFILEPROCESS_NAME: "JSON Data File Processment"
  APP_JSONDATAFILEPROCESS_FULL_NAME: "JSON Data File Processment\\JSON Data File Processment.sln"
  APP_JSONDATAFILEPROCESS_OUTPUT_FOLDER: "JSON Data File Processment\\Delete Comment\\bin\\Release"

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup NuGet
      uses: NuGet/setup-nuget@v1.0.2
    
    - name: Restore NuGet packages
      run: nuget restore "${{ env.APP_ASSESSMENTTOOL_FULL_NAME }}"
    
    - name: Setup MSBuild
      uses: microsoft/setup-msbuild@v1.0.0
      with:
        vs-version: "16.5"
    
    - name: Build Assessment Tool Prototype
      run: msbuild "${{ env.APP_ASSESSMENTTOOL_FULL_NAME }}" /p:Configuration=Release

    - name: Build JSON Data File Processment
      run: msbuild "${{ env.APP_JSONDATAFILEPROCESS_FULL_NAME }}" /p:Configuration=Release
    
    - name: Upload Assessment Tool Prototype
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ${{ env.APP_ASSESSMENTTOOL_NAME }}
        path: "${{ env.APP_ASSESSMENTTOOL_OUTPUT_FOLDER }}"

    - name: Upload JSON Data File Processment
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ${{ env.APP_JSONDATAFILEPROCESS_NAME }}
        path: "${{ env.APP_JSONDATAFILEPROCESS_OUTPUT_FOLDER }}"
